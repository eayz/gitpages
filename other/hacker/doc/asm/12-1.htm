<html>

<head>
<meta http-equiv="Content-Language" content="zh-cn">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>第12章 汇编语言和C语言</title>
<link rel=stylesheet href="Assember.css">
<script LANGUAGE="javascript" src="Assember.js"></script>
<script language="JavaScript1.2" src="menus.js"></script>
<script language="JavaScript1.2" src="chapter12.js"></script>
<SCRIPT ID=clientEventHandlersJS LANGUAGE=javascript>
<!--

function Address1_onmouseover() {
	Address1.src="TextbookIMG\\03-1-d.gif" 
}

function Address1_onmouseout() {
	Address1.src="TextbookIMG\\03-1.gif" 
}

//-->
</SCRIPT>
</head>

<body topmargin="1" leftmargin="0" background="TextBookIMG/background.gif">
<script language="JavaScript1.2">fwLoadMenus();</script>

<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="100%" colspan="2">
  <p align="center">
  <img border="0" src="images/btitle12.gif" width="778"></p>
    </td> 
  </tr>
  <tr>
    <td width="100%" colspan="2">
      <p align="center"><A href="index.htm"><IMG border=0 id=Home0 language=javascript onmouseout="return Home0_onmouseout()" onmouseover="return Home0_onmouseover()" src="Button/home1.gif" width="96"></a><A href="homework.htm"><IMG border=0 id=Homework language=javascript  onmouseout ="return  Homework_onmouseout()" onmouseover="return Homework_onmouseover()" src="Button/homework1.gif" width="96" ></a><A href="bbs/index.asp"><IMG border=0 id=Discuss language=javascript  onmouseout ="return  Discuss_onmouseout()" onmouseover="return Discuss_onmouseover()" src="Button/discuss1.gif" width="96" ></a><A href="question.htm"><IMG border=0 id=Problem language=javascript  onmouseout ="return  Problem_onmouseout()" onmouseover="return Problem_onmouseover()" src="Button/problem1.gif" width="96" ></a><A href="test.asp"><IMG border=0 id=Test language=javascript  onmouseout ="return  Test_onmouseout()" onmouseover="return Test_onmouseover()" src="Button/test1.gif" width="96" ></a><A href="search.htm"><IMG border=0 id=Search language=javascript  onmouseout ="return  Search_onmouseout()" onmouseover="return Search_onmouseover()" src="Button/search1.gif" width="96" ></a></p></td> 
  </tr>
  <tr>
    <td width="50%">
    <a href="#" onMouseOut="FW_startTimeout();"  onMouseOver="window.FW_showMenu(window.fw_menu_0,50,115);" >          
    <img name="menu1" src="TextBookIMG/menu.gif" border="0" width="51"></a>
    </td>                          
    <td width="50%">              
      <p align="right"><!--webbot bot="Validation" B-Disallow-First-Item="TRUE"
      -->     
  <select name="chapter1" onchange="location.href=chapter1.options[chapter1.selectedIndex].value" id=Chapter1 size="1">       
    <option selected value="#">课件章节</option>
    <option value="course.htm">网络课件目录</option>
    <option value="01-1.htm">第1章 预备知识</option>
    <option value="02-1.htm">第2章 CPU资源和存储器</option>
    <option value="03-1.htm">第3章 操作数的寻址方式</option>
    <option value="04-1.htm">第4章 标识符和表达式</option>
    <option value="05-1.htm">第5章 微机CPU的指令系统</option>
    <option value="06-1.htm">第6章 程序的基本结构</option>
    <option value="07-1.htm">第7章 子程序和库</option>
    <option value="08-1.htm">第8章 输入输出和中断</option>
    <option value="09-1.htm">第9章 宏</option>
    <option value="10-1.htm">第10章 应用程序的设计</option>
    <option value="11-1.htm">第11章 数值运算协处理器</option>
    <option value="12-1.htm">第12章 汇编语言和C语言</option>
  </select></p></td>
  </tr>
</table>
    
<h1 align="center">第12章 汇编语言和C语言</h1>                                                                  
                                    
<p style="TEXT-INDENT: 21.25pt">C/C++语言是一个被广泛使用的程序设计语言，它不仅具有良好的高级语言特征，而且还具有一些低级语言的特点，如：寄存器变量、位操作等。所以，C语言的程序与汇编语言程序之间能很平滑地衔接。另外，目前主要的C语言程序开发环境，如：Turbo C/C++、Borland C/C++等，也都提供了很好的混合编程手段。                              
</p>        
<p style="TEXT-INDENT: 21.25pt">本章主要介绍汇编语言和C语言的混合编程和调用方法。虽然其它高级语言，如：Pascal、Basic等，也可与汇编语言混合使用，但出于其应用范围的考虑，不再对它们进行介绍，感兴趣的读者可参阅有关技术资料。</p>        
<h2>12.1 汇编指令的嵌入</h2>                                 
<p style="TEXT-INDENT: 21.25pt">为了提高C语言程序内某特殊功能段的处理效率，我们可以在其源程序中嵌入一段汇编语言程序段。这样做，虽然能达到提高了程序处理效率的目的，但它无疑以丧失源程序的可移植性为代价。所以，当想用C语言和汇编语言混合编程时，程序员需要权衡采用这种方法的利与弊。
</p>        
<p style="text-indent: 21.25pt">在C语言中，嵌入汇编语言的语法如下(*)：     
</p>        
<p style="margin-left: 50pt">
asm  &lt;opcode> &lt;operands> &lt;; or newline>                              
</p>        
<p style="text-indent: 21.25pt">注意：这里的分号';'不是汇编语言中起注释作用的分号，而是作为语句的分隔符。
</p>
<p style="text-indent: 21.25pt">若C语言源程序中嵌入一条汇编语句，则可按下列方式来做：    
</p>
<p style="margin-left: 50pt">asm mov ax, data                             
</p>
<p style="text-indent: 21.25pt">若要嵌入一组汇编语句，则需要用括号'{'和'}'把它们括起来。
</p>
<p style="margin-left: 50pt">
  asm {<br>                             
  　　 mov　ax, data1<br>                             
  　　 xchg　ax, data2<br>                             
  　　 mov　data1, ax　　　　　//实现整型变量data1和data2之值的交换<br>    
  }
</p>
<p>例12.1 在C语言源程序中嵌入汇编语言语句实现赋值语句A=A+B+C，其中：A、B、C都是整型变量。                          
</p>
<p>
解： ……                           
</p>
<p style="text-indent: -21.25pt; margin-left: 42.50pt">  
  asm {push ax　　　　　　//实现整型变量A=A+B+C<br>    
&nbsp; mov　ax, A<br>                             
&nbsp; add　ax, B<br>                             
&nbsp; add　ax, C<br>                             
&nbsp; mov　A, ax<br>                             
&nbsp; pop　ax<br>    
  }
</p>
             
<p align="right"><A href="index.htm"><IMG border=0 id=Home language=javascript onmouseout="return Home_onmouseout()" onmouseover="return Home_onmouseover()" src="Button/home1.gif" width="96"></a><a href="asp/QuestionIndex.asp-chapter=12&amp;sort=date"><IMG border=0 id=Question  language=javascript onmouseout="return Question_onmouseout()" onmouseover="return Question_onmouseover()" src="Button/question1.gif" width="96"></a><a href="11-Exercise.htm"><IMG border=0 id=PrevPage language=javascript onmouseout="return PrevPage_onmouseout()" onmouseover="return PrevPage_onmouseover()" src="Button/prevpage1.gif" width="96"></a><a href="12-2.htm"><IMG border=0 id=NextPage language=javascript onmouseout="return NextPage_onmouseout()" onmouseover="return NextPage_onmouseover()" src="Button/NextPage1.gif" width="96"></a>     
 <!--webbot bot="Validation" B-Disallow-First-Item="TRUE" -->     
<select name="chapter2" onchange="location.href=chapter2.options[chapter2.selectedIndex].value" id=Chapter2 size="1">          
    <option selected value="#">课件章节</option>
    <option value="course.htm">课件目录</option>
    <option value="01-1.htm">第1章 预备知识</option>       
    <option value="02-1.htm">第2章 CPU资源和存储器</option>       
    <option value="03-1.htm">第3章 操作数的寻址方式</option>       
    <option value="04-1.htm">第4章 标识符和表达式</option>       
    <option value="05-1.htm">第5章 微机CPU的指令系统</option>       
    <option value="06-1.htm">第6章 程序的基本结构</option>       
    <option value="07-1.htm">第7章 子程序和库</option>       
    <option value="08-1.htm">第8章 输入输出和中断</option>       
    <option value="09-1.htm">第9章 宏</option>       
    <option value="10-1.htm">第10章 应用程序的设计</option>       
    <option value="11-1.htm">第11章 数值运算协处理器</option>
    <option value="12-1.htm">第12章 汇编语言和C语言</option>
  </select></p>     
                
</body>         
         
</html>         
