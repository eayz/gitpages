<html>

<head>
<meta http-equiv="Content-Language" content="zh-cn">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>附录3.4 杂项的系统服务的说明</title>
<link rel=stylesheet href="../Assember.css">
<base target="_self">
</head>

<body topmargin="1" leftmargin="0" background="image/background.gif">

<p><font color="#FF00FF">(1)、功能00H</font></p>    
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">开盒式磁带机马达</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝00H</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，否则，AH＝状态(86H，若未安装盒式磁带机)</td>
  </tr>
</table>
         
<p><a name="01H"><font color="#FF00FF">(2)、功能01H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">关盒式磁带机马达</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝01H</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，否则，AH＝状态(86H，若未安装盒式磁带机)</td>
  </tr>
</table>
         
<p><a name="02H"><font color="#FF00FF">(3)、功能02H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">读盒式磁带机</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝02H<br>
      CX＝读入的字节数<br>
      ES:BX＝存放数据的缓冲区地址</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，DX＝实际读入的字节数，ES:BX指向最后一个字节的后面地址，否则，AH＝状态码，其值含义如下：
      <table border="0" width="100%" cellspacing="1">
        <tr>
          <td width="46%">01H ―― CRC校验码错</td>       
          <td width="54%">80H ―― 非法命令</td>       
        </tr>
        <tr>
          <td width="46%">02H ―― 位信号混乱</td>       
          <td width="54%">86H ―― 未安装盒式磁带机</td>       
        </tr>
        <tr>
          <td width="100%" colspan="2">04H ―― 无发现数据</td>       
        </tr>
      </table>
    </td>
  </tr>
</table>
         
<p><a name="03H"><font color="#FF00FF">(4)、功能03H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">写盒式磁带机</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝03H<br>
      CX＝要写入的字节数<br>
      ES:BX＝已存数据的缓冲区地址</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，CX＝00H，ES:BX指向最后一个字节的后面地址，否则，AH＝状态码，其值含义如下：
      <table border="0" width="100%" cellspacing="1">
        <tr>
          <td width="42%">80H ―― 非法命令</td>       
          <td width="58%">86H ―― 未安装盒式磁带机</td>       
        </tr>
      </table>
    </td>
  </tr>
</table>
         
<p><a name="0FH"><font color="#FF00FF">(5)、功能0FH</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">格式化ESDI驱动器定期中断，仅在PS/2中有效，在此从略</td>   
  </tr>
</table>
         
<p><a name="21H"><font color="#FF00FF">(6)、功能21H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">读/写自检(POST)错误记录，仅在PS/2中有效，在此从略</td>   
  </tr>
</table>
         
<p><a name="4FH"><font color="#FF00FF">(7)、功能4FH</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">键盘截听，仅在PS/2中有效，在此从略</td>   
  </tr>
</table>
         
<p><a name="80H"><font color="#FF00FF">(8)、功能80H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">打开设备</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝80H<br>
      BX＝设备号<br>
      CX＝进程号</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，AH＝00H，否则，AH＝状态码</td>
  </tr>
</table>
         
<p><a name="81H"><font color="#FF00FF">(9)、功能81H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">关闭设备</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝81H<br>
      BX＝设备号<br>
      CX＝进程号</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，AH＝00H，否则，AH＝状态码</td>
  </tr>
</table>
         
<p><a name="82H"><font color="#FF00FF">(10)、功能82H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">进程终止</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝81H<br>
      BX＝进程号</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，AH＝00H，否则，AH＝状态码</td>
  </tr>
</table>
         
<p><a name="83H"><font color="#FF00FF">(11)、功能83H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">事件等待</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝83H
      <table border="0" width="100%" cellspacing="0" cellpadding="0">
        <tr>
          <td width="35%" valign="top" align="right">若需要事件等待，则：</td>
          <td width="65%">AL＝00H<br>
            CX:DX＝千分秒<br>
            ES:BX＝信号量字节的地址</td>
        </tr>
        <tr>
          <td width="35%" align="right">否则，调用参数为</td>
          <td width="65%">AL＝01H</td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">若调用时，AL＝00H，操作成功――CF＝0，否则，CF＝1</td>
  </tr>
</table>
         
<p><a name="84H"><font color="#FF00FF">(12)、功能84H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">读游戏杆</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝84H<br>
      DX＝00H――读取开关设置<br>
      　＝01H――读取阻力输入</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝1H――操作失败，否则，<br>
      　DX＝00H时，AL＝开关设置(位7～4)<br>
      　DX＝01H时，AX、BX、CX和DX分别为A(x)、A(y)、B(x)和B(y)的值</td>
  </tr>
</table>
         
<p><a name="85H"><font color="#FF00FF">(13)、功能85H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">系统请求(SysReq)键</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝85H<br>
      AL＝00H――键按下<br>
      　＝01H――键放开</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，AH＝00H，否则，AH＝状态码</td>
  </tr>
</table>
         
<p><a name="86H"><font color="#FF00FF">(14)、功能86H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">延迟</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝86H<br>
      CX:DX＝千分秒</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，AH＝00H</td>
  </tr>
</table>
         
<p><a name="87H"><font color="#FF00FF">(15)、功能87H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">从常规内存和扩展内存之间移动扩展内存块</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝87H<br>
      CX＝移动的字数<br>
      ES:SI＝GDT(Global Descriptor Table)的地址，其结构定义如下：     
      <table border="0" width="100%" cellspacing="0" cellpadding="0">
        <tr>
          <td width="24%" align="center">偏移量</td>
          <td width="76%">存储的信息</td>
        </tr>
        <tr>
          <td width="24%" align="center">00h-0Fh</td>
          <td width="76%">保留，但现全为0</td>
        </tr>
        <tr>
          <td width="24%" align="center">10h-11h</td>
          <td width="76%">段的长度(2CX-1或更大)</td>
        </tr>
        <tr>
          <td width="24%" align="center">12h-14h</td>
          <td width="76%">24位源地址</td>
        </tr>
        <tr>
          <td width="24%" align="center">15h</td>
          <td width="76%">访问权限字节(其值为93h)</td>
        </tr>
        <tr>
          <td width="24%" align="center">16h-17h</td>
          <td width="76%">保留，但现全为0</td>
        </tr>
        <tr>
          <td width="24%" align="center">18h-19h</td>
          <td width="76%">段的长度(2CX-1或更大)</td>
        </tr>
        <tr>
          <td width="24%" align="center">1Ah-1Ch&nbsp;</td>
          <td width="76%">24位目标源地址</td>
        </tr>
        <tr>
          <td width="24%" align="center">1Dh</td>
          <td width="76%">访问权限字节(其值为93h)</td>
        </tr>
        <tr>
          <td width="24%" align="center">1Eh-2Fh</td>
          <td width="76%">保留，但现全为0</td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝0――操作成功，AH＝00H，否则，AH＝状态码，其含义如下：<br>
      　　01H ―― RAM奇偶错<br>      
      　　02H ―― 异常中断错<br>      
      　　03H ―― 20号线门地址失败</td>      
  </tr>
</table>
         
<p><a name="88H"><font color="#FF00FF">(16)、功能88H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">读取扩展内存大小</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝88H</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">AX＝扩展内存字节数(以K为单位)</td>
  </tr>
</table>
         
<p><a name="89H"><font color="#FF00FF">(17)、功能89H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">进入保护模式，CPU从实模式进入保护模式</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝89H<br>
      BH＝IRQ0的中断号<br>
      BL＝IRQ8的中断号<br>
      ES:SI＝GDT的地址(参见功能号87H)</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝1――操作失败，AH＝0FFH，否则，AH＝00H，CS、DS、ES和SS都是用户定义的选择器</td>
  </tr>
</table>
         
<p><a name="90H"><font color="#FF00FF">(18)、功能90H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">设备等待</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝90H
      <table border="0" width="100%" cellspacing="0" cellpadding="0">
        <tr>
          <td width="7%" valign="top" rowspan="2">AL</td>
          <td width="93%">＝驱动器类型，具体的驱动器类型定义如下：<br>
            ＝00H~7FH――串行再重用设备<br>
            ＝80H~0BFH――可重入式设备<br>
            ＝0C0H~0FFH――等待访问设备，没有自检功能</td>
        </tr>
        <tr>
          <td width="93%">
            <table border="0" width="100%" cellspacing="0" cellpadding="0">
              <tr>
                <td width="42%" valign="top">00h ― 磁盘<br>     
                  02h ― 键盘<br>     
                  80h ― 网络<br>     
                  FDh ― 软盘马达启动</td>     
                <td width="58%">   
01h ― 软盘<br>     
03h ― 点设备(Pointing Device)<br>     
FCh ― 硬盘复位<br>     
FEh ― 打印机</td>     
              </tr>
            </table>
          </td>
        </tr>
      </table>
      <p>ES:BX＝对驱动器类型80H~0FFH的请求块地址</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">CF＝1――操作失败，否则，AH＝00H</td>
  </tr>
</table>
         
<p><a name="91H"><font color="#FF00FF">(19)、功能91H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">设备加电自检</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝91H<br>
      AL＝00H~7FH――串行再重用设备<br>
      　＝80H~0BFH――可重入式设备</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">AH＝00H</td>
  </tr>
</table>
         
<p><a name="0C0H"><font color="#FF00FF">(20)、功能0C0H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" rowspan="3" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">读取系统环境</td>   
  </tr>
  <tr>
    <td width="14%" valign="top">入口参数：</td>
    <td width="82%">AH＝0C0H</td>
  </tr>
  <tr>
    <td width="14%" valign="top">出口参数：</td>
    <td width="82%">ES:BX＝配置表地址，配置表的定义如下：
      <table border="0" width="100%" cellspacing="0" cellpadding="0">
        <tr>
          <td width="23%">偏移量</td>
          <td width="77%">含义说明</td>
        </tr>
        <tr>
          <td width="23%">00h-01h</td>
          <td width="77%">表的大小(字节数)</td>
        </tr>
        <tr>
          <td width="23%">02h</td>
          <td width="77%">系统模型</td>
        </tr>
        <tr>
          <td width="23%">03h</td>
          <td width="77%">系统子模型</td>
        </tr>
        <tr>
          <td width="23%">04h</td>
          <td width="77%">BIOS版本号</td>
        </tr>
        <tr>
          <td width="23%" valign="top">05h</td>
          <td width="77%">  
配置标志，其各位为1时的说明如下：<br>
　　位7―DMA通道3使用<br>
　　位6―存在从属8259<br>
　　位5―实时时钟有效<br>
　　位4―键盘截听有效<br>
　　位3―等待外部事件有效<br>
　　位2―扩展BIOS数据区<br>
　　位1―微通道设施<br>
　　位0―保留</td>
        </tr>
        <tr>
          <td width="23%">06h-09h</td>
          <td width="77%">  
保留</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
         
<p><a name="0C1H"><font color="#FF00FF">(21)、功能C1H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">读取扩展BIOS数据区地址，仅在PS/2中有效，在此从略</td>   
  </tr>
</table>
         
<p><a name="0C2H"><font color="#FF00FF">(22)、功能C2H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">鼠标图形，仅在PS/2中有效，在此从略</td>   
  </tr>
</table>
         
<p><a name="0C3H"><font color="#FF00FF">(23)、功能C3H</font></a> 
</p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">设置WatcHdog超时，仅在PS/2中有效，在此从略</td>   
  </tr>
</table>
         
<p><a name="0C4H"><font color="#FF00FF">(24)、功能C4H</font></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td width="5%" valign="top"></td>
    <td width="14%">功能描述：</td>
    <td width="82%">可编程选项选择，仅在PS/2中有效，在此从略</td>   
  </tr>
</table>
         
</body>        
        
</html>        
